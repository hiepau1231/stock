{% extends "base.html" %}
{% load static %}

{% block title %} Dashboard {% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <!-- Market Overview -->
    <div class="row">
        <div class="col-xl-12 mb-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="text-primary">Tổng quan thị trường</h6>
                </div>
                <div class="card-body">
                    {% if market_overview %}
                        <div class="table-responsive">
                            <table class="table align-items-center">
                                <thead>
                                    <tr>
                                        <th>Chỉ số</th>
                                        <th>Giá trị</th>
                                        <th>Thay đổi</th>
                                        <th>% Thay đổi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for index in market_overview %}
                                    <tr>
                                        <td>{{ index.index_name }}</td>
                                        <td>{{ index.value }}</td>
                                        <td>{{ index.change }}</td>
                                        <td>{{ index.change_percent }}%</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>Không có dữ liệu thị trường</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Industry Analysis -->
    <div class="row">
        <div class="col-xl-12 mb-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="text-primary">Phân tích ngành</h6>
                </div>
                <div class="card-body">
                    {% if industry_analysis %}
                        <div class="table-responsive">
                            <table class="table align-items-center">
                                <thead>
                                    <tr>
                                        <th>Ngành</th>
                                        <th>Số lượng CP</th>
                                        <th>Vốn hóa (tỷ)</th>
                                        <th>% Thay đổi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for industry in industry_analysis %}
                                    <tr>
                                        <td>{{ industry.industry_name }}</td>
                                        <td>{{ industry.stock_count }}</td>
                                        <td>{{ industry.market_cap }}</td>
                                        <td>{{ industry.change_percent }}%</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>Không có dữ liệu phân tích ngành</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block javascripts %}
<!-- Thay thế script cũ bằng CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Add any JavaScript for charts or real-time updates here
</script>
{% endblock javascripts %}
